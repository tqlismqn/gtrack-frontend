<mat-card class="drawer-card" *ngIf="driver || adding">
  <header class="drawer-header">
    <div *ngIf="!adding && driver as current; else addTitle">
      <h3>{{ current.fullName }}</h3>
      <p>{{ current.email }} ¬∑ {{ current.phone }}</p>
    </div>
    <ng-template #addTitle>
      <div>
        <h3>–î–æ–±–∞–≤–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è</h3>
      </div>
    </ng-template>
    <div class="header-actions">
      <button mat-stroked-button color="primary" *ngIf="driver" (click)="shiftDocs.emit()">
        <mat-icon>schedule</mat-icon>
        –°–¥–≤–∏–Ω—É—Ç—å —Å—Ä–æ–∫–∏
      </button>
      <button mat-icon-button (click)="close.emit()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </header>

  <ng-container *ngIf="adding; else viewMode">
    <form [formGroup]="form" (ngSubmit)="submit()" class="add-form">
      <div class="grid">
        <mat-form-field appearance="fill">
          <mat-label>–§–ò–û</mat-label>
          <input matInput formControlName="fullName" required />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–†–æ–¥–Ω–æ–µ —á–∏—Å–ª–æ</mat-label>
          <input matInput formControlName="rc" required />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>E-mail</mat-label>
          <input matInput formControlName="email" required />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–¢–µ–ª–µ—Ñ–æ–Ω</mat-label>
          <input matInput formControlName="phone" required />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–°—Ç–∞—Ç—É—Å</mat-label>
          <mat-select formControlName="status">
            <mat-option value="Active">Active</mat-option>
            <mat-option value="OnLeave">OnLeave</mat-option>
            <mat-option value="Inactive">Inactive</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ</mat-label>
          <mat-select formControlName="citizenship">
            <mat-option value="CZ">CZ</mat-option>
            <mat-option value="EU">EU</mat-option>
            <mat-option value="Non-EU">Non-EU</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–õ–æ–∫–∞—Ü–∏—è</mat-label>
          <mat-select formControlName="workplace">
            <mat-option value="Praha">Praha</mat-option>
            <mat-option value="Kladno">Kladno</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–î–∞—Ç–∞ –Ω–∞–π–º–∞</mat-label>
          <input matInput formControlName="hireDate" type="date" />
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>–ö–æ–Ω—Ç—Ä–∞–∫—Ç</mat-label>
          <mat-select formControlName="contractType">
            <mat-option value="–°—Ä–æ—á–Ω—ã–π">–°—Ä–æ—á–Ω—ã–π</mat-option>
            <mat-option value="–ë–µ—Å—Å—Ä–æ—á–Ω—ã–π">–ë–µ—Å—Å—Ä–æ—á–Ω—ã–π</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="form-checkboxes">
        <mat-checkbox formControlName="pasSouhlas">Pas &amp; souhlas</mat-checkbox>
        <mat-checkbox formControlName="propiskaCZ">–ü—Ä–æ–ø–∏—Å–∫–∞ CZ</mat-checkbox>
      </div>
      <footer class="form-footer">
        <span class="hint">–î–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∑–∞—Ä–ø–ª–∞—Ç–∞ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</span>
        <span class="spacer"></span>
        <button mat-stroked-button type="button" (click)="close.emit()">–û—Ç–º–µ–Ω–∞</button>
        <button mat-flat-button color="primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </footer>
    </form>
  </ng-container>

  <ng-template #viewMode>
    <mat-tab-group *ngIf="driver as current">
      <mat-tab label="–û–±—â–µ–µ">
        <div class="tab-content">
          <div class="info-grid">
            <div><span class="label">–°—Ç–∞—Ç—É—Å</span><strong>{{ current.status }}</strong></div>
            <div><span class="label">–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ</span><strong>{{ current.citizenship }}</strong></div>
            <div><span class="label">–õ–æ–∫–∞—Ü–∏—è</span><strong>{{ current.workplace }}</strong></div>
            <div><span class="label">–ù–∞–π–º</span><strong>{{ current.hireDate }}</strong></div>
            <div><span class="label">–ö–æ–Ω—Ç—Ä–∞–∫—Ç</span><strong>{{ current.contractType }}</strong></div>
            <div><span class="label">RC</span><strong>{{ current.rc }}</strong></div>
            <div><span class="label">Pas &amp; souhlas</span><strong>{{ current.pasSouhlas ? '–î–∞' : '–ù–µ—Ç' }}</strong></div>
            <div><span class="label">–ü—Ä–æ–ø–∏—Å–∫–∞</span><strong>{{ current.propiskaCZ ? 'CZ' : '–ù–µ—Ç' }}</strong></div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã">
        <div class="tab-content">
          <ul>
            <li *ngFor="let key of docKeys" [class]="docState(key)">
              <span class="doc-key">{{ key | uppercase }}</span>
              <span>{{ current.docs[key].uploaded ? '–ó–∞–≥—Ä—É–∂–µ–Ω–æ' : '–ù–µ—Ç —Ñ–∞–π–ª–∞' }}</span>
              <span>–¥–æ {{ current.docs[key].expires | date }}</span>
            </li>
          </ul>
        </div>
      </mat-tab>
      <mat-tab label="üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞">
        <div class="tab-content salary">
          <div>–ë–∞–∑–æ–≤–∞—è: {{ current.salary.base | number }}</div>
          <div>–ë–æ–Ω—É—Å: {{ current.salary.bonus | number }}</div>
          <div>–ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∏: {{ current.salary.trips }}</div>
          <div>–°—É—Ç–æ—á–Ω—ã–µ: {{ current.salary.perDiem | number }}</div>
          <div>–£–¥–µ—Ä–∂–∞–Ω–∏—è: {{ current.salary.deductions | number }}</div>
          <div class="total">–ò—Ç–æ–≥–æ: {{ totalSalary | number }}</div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </ng-template>
</mat-card>
